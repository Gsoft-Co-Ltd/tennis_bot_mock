<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>お手続き画面（テニスボット）</title>
  <!-- Bootstrap 5 -->
  <link 
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
    rel="stylesheet"
  />
  <style>
    /* 全体設定 */
    body {
      background-color: #f5f7fa;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      min-height: 80vh;
    }

    /* ロゴセクション */
    .logo {
      text-align: center;
      margin-bottom: 15px;
      font-size: 24px;
      font-weight: bold;
      color: #4caf50; /* テニスボットのイメージカラー */
    }
    .logo img {
      width: 30px;
      vertical-align: middle;
      margin-right: 5px;
    }

    /* メインメニュー */
    .menu {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .menu button {
      margin: 10px 0;
      padding: 15px 30px;
      background: #4caf50;
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
      width: 100%;
      max-width: 300px;
    }
    .menu button:hover {
      background: #43a047;
    }

    /* 各フォームコンテナ */
    .form-container {
      display: none;
    }
    .form-container.active {
      display: block;
    }

    /* フォーム見出し */
    .form-container h2 {
      font-size: 1.2rem;
      color: #4caf50;
      margin-bottom: 16px;
      border-bottom: 2px solid #4caf50;
      padding-bottom: 6px;
    }

    /* サブ見出し */
    .sub-title {
      font-size: 1rem;
      color: #333;
      margin: 10px 0 6px 0;
      border-left: 4px solid #4caf50;
      padding-left: 8px;
    }

    /* フォーム内要素 */
    form {
      display: flex;
      flex-direction: column;
    }
    form label {
      margin-top: 8px;
      margin-bottom: 6px;
      font-weight: bold;
      color: #333;
    }
    form input,
    form textarea,
    form select {
      margin-bottom: 12px;
      padding: 10px;
      font-size: 14px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    form button {
      margin-top: 8px;
      padding: 10px;
      font-size: 14px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      color: #fff;
    }
    form button:hover {
      opacity: 0.9;
    }

    .submit-button {
      background-color: #4caf50;
    }
    .submit-button:hover {
      background-color: #43a047;
    }
    .back-button {
      background-color: #6c757d;
    }
    .back-button:hover {
      background-color: #5a6268;
    }

    /* エラーメッセージ */
    .error-message {
      color: red;
      font-size: 14px;
      margin-top: -10px;
      margin-bottom: 10px;
    }

    /* レスポンシブ対応 */
    @media(max-width: 400px){
      .menu button {
        font-size: 14px;
        padding: 10px 20px;
      }
      .container {
        padding: 15px;
      }
    }
  </style>

  <script>
    // メニュー選択 => 各フォームに遷移
    function openForm(formId) {
      document.querySelector('.menu').style.display = 'none';
      const forms = document.querySelectorAll('.form-container');
      forms.forEach(f => f.classList.remove('active'));
      document.getElementById(formId).classList.add('active');
    }

    // 戻る => メニューを再表示
    function goBack() {
      const forms = document.querySelectorAll('.form-container');
      forms.forEach(f => f.classList.remove('active'));
      document.querySelector('.menu').style.display = 'flex';
    }

    // 入力必須項目のバリデーション
    function validateForm(formId) {
      const form = document.getElementById(formId);
      const inputs = form.querySelectorAll('input, textarea, select');
      let isValid = true;

      inputs.forEach(input => {
        const errorElement = document.getElementById(`${input.id}-error`);
        if (input.hasAttribute('required')) {
          if (!input.value.trim()) {
            isValid = false;
            if (errorElement) {
              const labelName = input.getAttribute('data-label') || input.previousElementSibling.innerText;
              errorElement.textContent = `${labelName}は必須です。`;
            }
          } else {
            if (errorElement) errorElement.textContent = '';
          }
        }
      });

      // パスワード変更用の追加チェック
      if(formId === 'changeInfoForm'){
        const newPass = document.getElementById('newPassword')?.value.trim() || '';
        const cfmPass = document.getElementById('confirmPassword')?.value.trim() || '';
        if(newPass && (newPass.length<8)) {
          isValid = false;
          const err = document.getElementById('newPassword-error');
          if(err){
            err.textContent = 'パスワードは8文字以上にしてください。';
          }
        }
        if(newPass && cfmPass && newPass !== cfmPass) {
          isValid = false;
          const err = document.getElementById('confirmPassword-error');
          if(err){
            err.textContent = '新しいパスワード（再入力）が一致しません。';
          }
        }
      }

      return isValid;
    }

    // 送信処理
    function submitForm(event, formId) {
      event.preventDefault();
      if (validateForm(formId)) {
        alert('手続きが正常に送信されました。');
        goBack(); // 送信後メニューに戻る or 別ページへのリダイレクトなど
      }
    }
  </script>
</head>
<body>

  <div class="container">
    <div class="logo">
      <img src="../resource/tennis_icon.svg" alt="Tennis Logo">
      Tennis BoT
    </div>

    <!-- メニュー -->
    <div class="menu">
      <button onclick="openForm('change-info-form')">会員情報の変更</button>
      <button onclick="openForm('suspend-form')">コース・クラス変更</button>
      <button onclick="openForm('suspend-form')">休会手続き</button>
      <button onclick="openForm('cancel-form')">退会手続き</button>
    </div>

    <!-- 会員情報の変更 (拡張) -->
    <div id="change-info-form" class="form-container">
      <h2>会員情報の変更</h2>
      <form id="changeInfoForm" onsubmit="submitForm(event, 'changeInfoForm')">
        
        <!-- 基本情報 -->
        <span class="sub-title">基本情報</span>
        <label for="name">名前 <span class="text-danger">*</span></label>
        <input 
          type="text" 
          id="name" 
          data-label="名前" 
          required
          placeholder="新しい名前を入力してください"
        />
        <div id="name-error" class="error-message"></div>

        <label for="email">メールアドレス <span class="text-danger">*</span></label>
        <input 
          type="email" 
          id="email" 
          data-label="メールアドレス" 
          required
          placeholder="新しいメールアドレスを入力してください"
        />
        <div id="email-error" class="error-message"></div>

        <label for="phone">電話番号 <span class="text-danger">*</span></label>
        <input 
          type="tel" 
          id="phone" 
          data-label="電話番号" 
          required
          placeholder="新しい電話番号を入力してください"
        />
        <div id="phone-error" class="error-message"></div>

        <span class="sub-title">住所情報</span>
        <label for="postalCode">郵便番号 <span class="text-danger">*</span></label>
        <input 
          type="text" 
          id="postalCode"
          data-label="郵便番号"
          required
          placeholder="例: 123-4567"
        />
        <div id="postalCode-error" class="error-message"></div>

        <label for="address">住所 <span class="text-danger">*</span></label>
        <input 
          type="text" 
          id="address"
          data-label="住所"
          required
          placeholder="例: 東京都渋谷区1-2-3"
        />
        <div id="address-error" class="error-message"></div>

        <label for="address2">住所（マンション名など）</label>
        <input 
          type="text" 
          id="address2"
          placeholder="建物名・部屋番号など"
        />

        <!-- パスワード変更 -->
        <span class="sub-title">パスワード変更</span>
        <label for="oldPassword">現在のパスワード</label>
        <input 
          type="password" 
          id="oldPassword"
          placeholder="今のパスワード（任意）"
          data-label="現在のパスワード"
        />
        <div id="oldPassword-error" class="error-message"></div>

        <label for="newPassword">新しいパスワード</label>
        <input 
          type="password"
          id="newPassword"
          placeholder="半角英数字8文字以上"
          data-label="新しいパスワード"
        />
        <div id="newPassword-error" class="error-message"></div>

        <label for="confirmPassword">新しいパスワード（再入力）</label>
        <input 
          type="password"
          id="confirmPassword"
          placeholder="同じパスワードを再入力"
          data-label="新しいパスワード（再入力）"
        />
        <div id="confirmPassword-error" class="error-message"></div>

        <button 
          type="submit" 
          class="submit-button"
        >
          変更を保存する
        </button>
        <button 
          type="button" 
          class="back-button" 
          onclick="goBack()"
        >
          戻る
        </button>
      </form>
    </div>
    <!-- /会員情報の変更 -->

    <!-- 休会手続き -->
    <div id="suspend-form" class="form-container">
      <h2>休会手続き</h2>
      <form id="suspendForm" onsubmit="submitForm(event, 'suspendForm')">

        <label for="reason-suspend">休会理由 <span class="text-danger">*</span></label>
        <textarea 
          id="reason-suspend"
          data-label="休会理由"
          required
          placeholder="休会理由を入力してください"
        ></textarea>
        <div id="reason-suspend-error" class="error-message"></div>
        
        <label for="confirmation-suspend">確認<span class="text-danger">*</span></label>
        <input type="checkbox" id="confirmation-suspend" name="confirmation-suspend"> 休会手続きを確認しました
        <div id="confirmation-suspend-error" class="error-message"></div>

        <button 
          type="submit" 
          class="submit-button"
        >
          休会を申請する
        </button>
        <button 
          type="button" 
          class="back-button" 
          onclick="goBack()"
        >
          戻る
        </button>
      </form>
    </div>

    <!-- 退会手続き -->
    <div id="cancel-form" class="form-container">
      <h2>退会手続き</h2>
      <form id="cancelForm" onsubmit="submitForm(event, 'cancelForm')">
        <label for="reason-cancel">退会理由 <span class="text-danger">*</span></label>
        <textarea 
          id="reason-cancel"
          data-label="退会理由"
          required
          placeholder="退会理由を入力してください"
        ></textarea>
        <div id="reason-cancel-error" class="error-message"></div>

        <label for="confirmation">確認 <span class="text-danger">*</span></label>
        <div>
          <input 
            type="checkbox"
            id="confirmation"
            data-label="退会手続き確認"
            required
          />
          <label for="confirmation" class="form-check-label">
            退会手続きを確認しました
          </label>
        </div>
        <div id="confirmation-error" class="error-message"></div>

        <button 
          type="submit"
          class="submit-button"
        >
          退会を申請する
        </button>
        <button 
          type="button"
          class="back-button"
          onclick="goBack()"
        >
          戻る
        </button>
      </form>
    </div>
    <!-- /退会手続き -->

  </div><!-- /container -->

</body>
</html>
