<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>コース一覧</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
      body {
        background-color: #f5f7fa;
        font-family: Arial, sans-serif;
      }
      .container {
        margin-top: 20px;
      }
      .modal-header {
        background-color: #007bff;
        color: white;
      }
      .form-check-label {
        margin-left: 4px;
      }
      .section-title {
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- コース追加ボタン -->
      <button
        type="button"
        class="btn btn-primary mb-3"
        data-bs-toggle="modal"
        data-bs-target="#addCourseModal"
      >
        コースを追加
      </button>

      <!-- コース一覧テーブル -->
      <table class="table table-bordered table-sm">
        <thead class="table-primary">
          <tr>
            <th>コースID</th>
            <th>コース名</th>
            <th>レベル</th>
            <th>説明</th>
            <th>月額料金（税抜）</th>
            <th>利用可能曜日</th>
            <th>利用可能時間帯</th>
            <th>チケット配布周期</th>
            <th>配布枚数</th>
            <th>有効期間(日)</th>
            <th>有効期数</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody id="courseList">
          <!-- サンプル行 -->
          <tr>
            <td>C001</td>
            <td>フリーレッスンコース</td>
            <td>なし</td>
            <td>毎日1回無料で受講可能</td>
            <td>¥17,000</td>
            <td>月,火,水,木,金,土,日</td>
            <td>09:00~22:00</td>
            <td>日</td>
            <td>1枚</td>
            <td>1</td>
            <td>1</td>
            <td>
              <button class="btn btn-warning btn-sm">編集</button>
              <button class="btn btn-danger btn-sm">削除</button>
            </td>
          </tr>
          <tr>
            <td>C002</td>
            <td>基礎週一コース</td>
            <td>初級,中級</td>
            <td>毎週2回受講可能</td>
            <td>¥10,000</td>
            <td>月,火,水,木,金,土,日</td>
            <td>09:00~22:00</td>
            <td>日</td>
            <td>2枚</td>
            <td>7</td>
            <td>1</td>
            <td>
              <button class="btn btn-warning btn-sm">編集</button>
              <button class="btn btn-danger btn-sm">削除</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- コース追加モーダル -->
    <div
      class="modal fade"
      id="addCourseModal"
      tabindex="-1"
      aria-labelledby="addCourseModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addCourseModalLabel">コースを追加</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="閉じる"
            ></button>
          </div>
          <div class="modal-body">
            <form id="addCourseForm">
              <div class="card mb-3">
                <div class="card-body">
                  <h5 class="card-title">基本情報</h5>
                  <div class="mb-3">
                    <label for="courseId" class="form-label">コースID</label>
                    <input
                      type="text"
                      id="courseId"
                      class="form-control"
                      placeholder="例: C003"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="courseName" class="form-label">コース名</label>
                    <input
                      type="text"
                      id="courseName"
                      class="form-control"
                      placeholder="コース名を入力"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label class="form-label">レベル（複数選択可）</label>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="courseLevels"
                        value="なし"
                        id="levelNone"
                      />
                      <label class="form-check-label" for="levelNone"
                        >なし</label
                      >
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="courseLevels"
                        value="初心者"
                        id="levelBeginner"
                      />
                      <label class="form-check-label" for="levelBeginner"
                        >初心者</label
                      >
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="courseLevels"
                        value="中級者"
                        id="levelIntermediate"
                      />
                      <label class="form-check-label" for="levelIntermediate"
                        >中級者</label
                      >
                    </div>
                    <div class="form-check">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="courseLevels"
                        value="上級者"
                        id="levelAdvanced"
                      />
                      <label class="form-check-label" for="levelAdvanced"
                        >上級者</label
                      >
                    </div>
                  </div>
                  <div class="mb-3">
                    <label for="courseDescription" class="form-label"
                      >説明</label
                    >
                    <textarea
                      id="courseDescription"
                      class="form-control"
                      rows="3"
                      placeholder="コースの説明を入力してください"
                      required
                    ></textarea>
                  </div>
                  <div class="mb-3">
                    <label for="coursePrice" class="form-label"
                      >料金（税抜）</label
                    >
                    <input
                      type="number"
                      id="coursePrice"
                      class="form-control"
                      placeholder="例: 9500"
                      required
                    />
                  </div>
                </div>
              </div>

              <div class="card mb-3">
                <div class="card-body">
                  <h5 class="card-title">利用可能日時設定</h5>
                  <div class="mb-3">
                    <label class="form-label">利用可能曜日（複数選択可）</label
                    ><br />
                    <!-- 全て初期チェック済み -->
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="availableDays"
                        value="月"
                        id="dayMon"
                        checked
                      />
                      <label class="form-check-label" for="dayMon">月</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="availableDays"
                        value="火"
                        id="dayTue"
                        checked
                      />
                      <label class="form-check-label" for="dayTue">火</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="availableDays"
                        value="水"
                        id="dayWed"
                        checked
                      />
                      <label class="form-check-label" for="dayWed">水</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="availableDays"
                        value="木"
                        id="dayThu"
                        checked
                      />
                      <label class="form-check-label" for="dayThu">木</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="availableDays"
                        value="金"
                        id="dayFri"
                        checked
                      />
                      <label class="form-check-label" for="dayFri">金</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="availableDays"
                        value="土"
                        id="daySat"
                        checked
                      />
                      <label class="form-check-label" for="daySat">土</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        name="availableDays"
                        value="日"
                        id="daySun"
                        checked
                      />
                      <label class="form-check-label" for="daySun">日</label>
                    </div>
                  </div>

                  <!-- 開始・終了時刻を一行で -->
                  <div class="mb-3">
                    <label class="form-label">利用可能時間帯</label><br>
                    <input type="time" id="startTime" required /> ~
                    <input type="time" id="endTime" required />
                  </div>
                </div>
              </div>

              <div class="card mb-3">
                <div class="card-body">
                  <h5 class="card-title">チケット配布設定</h5>
                  <div class="row mb-3">
                    <div class="col-md-4">
                      <label for="ticketCycle" class="form-label"
                        >配布周期</label
                      >
                      <select id="ticketCycle" class="form-select" required>
                        <option value="日">日</option>
                        <option value="週">週</option>
                      </select>
                    </div>
                    <div class="col-md-4">
                      <label for="ticketCount" class="form-label"
                        >配布枚数</label
                      >
                      <input
                        type="number"
                        id="ticketCount"
                        class="form-control"
                        placeholder="例: 1"
                        required
                      />
                    </div>
                    <div class="col-md-4">
                      <label for="ticketValidity" class="form-label"
                        >有効期間（日）</label
                      >
                      <input
                        type="number"
                        id="ticketValidity"
                        class="form-control"
                        placeholder="例: 1"
                        required
                      />
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <label for="ticketTerms" class="form-label"
                        >有効期数</label
                      >
                      <input
                        type="number"
                        id="ticketTerms"
                        class="form-control"
                        placeholder="例: 1"
                        required
                      />
                      <small class="text-muted"
                        >1期分有効＝当期内で失効、2期分有効＝来期まで持ち越し可能
                        など</small
                      >
                    </div>
                  </div>
                </div>
              </div>

              <button type="submit" class="btn btn-primary w-100">保存</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <script>
      const courseList = document.getElementById("courseList");
      const addCourseForm = document.getElementById("addCourseForm");

      addCourseForm.addEventListener("submit", function (event) {
        event.preventDefault();

        // 入力値を取得
        const courseId = document.getElementById("courseId").value;
        const courseName = document.getElementById("courseName").value;
        const levelCheckboxes = document.querySelectorAll('input[name="courseLevels"]:checked');
        const courseLevels = Array.from(levelCheckboxes).map((cb) => cb.value);
        const courseDescription = document.getElementById("courseDescription").value;
        const coursePrice = document.getElementById("coursePrice").value;

        const dayCheckboxes = document.querySelectorAll('input[name="availableDays"]:checked');
        const availableDays = Array.from(dayCheckboxes).map((cb) => cb.value);

        const startTime = document.getElementById("startTime").value;
        const endTime = document.getElementById("endTime").value;

        const ticketCycle = document.getElementById("ticketCycle").value;
        const ticketCount = document.getElementById("ticketCount").value;
        const ticketValidity = document.getElementById("ticketValidity").value;
        const ticketTerms = document.getElementById("ticketTerms").value;

        // レベル表示
        const levelDisplay = courseLevels.join(",") || "なし";

        // 曜日表示
        const daysDisplay = availableDays.join(",") || "指定なし";

        // 時間帯表示
        const timesDisplay = `${startTime} - ${endTime}`;

        const newRow = document.createElement("tr");
        newRow.innerHTML = `
          <td>${courseId}</td>
          <td>${courseName}</td>
          <td>${levelDisplay}</td>
          <td>${courseDescription}</td>
          <td>¥${parseInt(coursePrice).toLocaleString()}</td>
          <td>${daysDisplay}</td>
          <td>${timesDisplay}</td>
          <td>${ticketCycle}</td>
          <td>${ticketCount}枚</td>
          <td>${ticketValidity}</td>
          <td>${ticketTerms}</td>
          <td>
            <button class="btn btn-warning btn-sm">編集</button>
            <button class="btn btn-danger btn-sm">削除</button>
          </td>
        `;

        courseList.appendChild(newRow);

        // フォームをリセット
        addCourseForm.reset();

        // モーダルを閉じる
        const modal = bootstrap.Modal.getInstance(document.getElementById("addCourseModal"));
        modal.hide();
      });
    </script>
  </body>
</html>
